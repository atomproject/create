var dragAndDropSetup=function(){function e(){var e=new JSZip,t=document.querySelector("t-stage");t&&t.getDownloadFiles().then(function(t){var n;e.file(t.componentFileName,t.componentFile),e.file(t.stateFileName,t.stateFile),n=e.generate({type:"blob"}),saveAs(n,t.componentFileName.replace(".html",".zip"))})}var t=($(".form"),$(".canvas"),null),n=$("#uploadInput");$(".control").draggable({addClasses:!1,scroll:!1,appendTo:"body",helper:"clone",cursor:"move",revert:"invalid",drag:function(e,n){t=n.helper.attr("data-component")}}),document.addEventListener("adjust-dom",function(){var e=document.querySelector(".form");$(".form").html(Polymer.dom(e).innerHTML)}),document.addEventListener("on-autosuggest-select",function(e){var n=e.detail;t=n.selectedItem.Name,attachControlToForm(n.selectedItem.Category),n.$.autoSuggest.value="",n.$.autoSuggest.blur(),e.stopPropagation()}),n.on("change",function(){var e,t=document.querySelector("t-stage"),n=this.files,o=new FileReader;n=Array.prototype.slice.call(n),e=n.find(function(e){return"state.json"===e.name}),e&&(o.addEventListener("load",function(e){t.recreateBuilder(e.target.result)}),o.readAsText(e))}),$("#upload").on("click",function(){n[0].click()}),$("#download").on("click",function(){e()})};!function(e){"use strict";var t=e.querySelector("#app");t.baseUrl="",t.menu=null,""===window.location.port&&(t.baseUrl="/fusion"),t._getElementsInCategory=function(e){var n=t.menu.elements.filter(function(t){return t.category===e.name});return n},t._getPropertySource=function(e){return"bower_components/"+t.builderType+"/property.json"},t.toggleAccordion=function(t,n,o){var r=t.currentTarget,a=e.querySelector(".menu-item.active");r.classList.contains("active")?r.classList.remove("active"):r.classList.add("active"),a&&a.classList.remove("active")},t._onElementsReceived=function(e){t.menu=e.detail.response},t.displayInstalledToast=function(){Polymer.dom(e).querySelector("platinum-sw-cache").disabled||Polymer.dom(e).querySelector("#caching-complete").show()},t.addEventListener("dom-change",function(){console.log("Fusion app is ready to rock!")}),window.addEventListener("WebComponentsReady",function(){setTimeout(function(){var e=$("t-component-panel")[0],t=$(".property-panel-Header")[0],n=$("t-stage")[0];dragAndDropSetup(),n.initComponentPanel(e,t)},500)})}(document);